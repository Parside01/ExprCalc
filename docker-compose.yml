version: '3.9'

services:
  server:
    depends_on: 
      - redis
      - rabbitmq
    image: expr
    container_name: expr
    build: ./
    command: ./main
    ports:
      - "8050:8050"
  rabbitmq:
    image: rabbitmq:3.10.7-management-alpine
    container_name: rabbitmq
    ports:
      - 5672:5672 
      - 15672:15672
    restart: always

  redis:  
    image: redis:7.2.3-alpine
    container_name: "redis"  
    ports:  
      - "6379:6379"  
    restart: always 